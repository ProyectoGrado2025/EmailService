<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Confirmación de reserva</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
</head>
<body style="margin: 0; padding: 0; background-color: #f4f4f4;">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
            <td align="center" style="padding: 20px 0;">
                <table border="0" cellpadding="0" cellspacing="0" width="600" style="background-color: #ffffff; border-collapse: collapse; border-radius: 8px; overflow: hidden;">
                    
                    <!-- Encabezado -->
                    <tr>
                        <td align="center" bgcolor="#70bbd9" style="padding: 40px 0;">
                            <img src="cid:logoImage" alt="Logo del restaurante" style="width: 150px;" />
                        </td>
                    </tr>

                    <!-- Cuerpo -->
                    <tr>
                        <td style="padding: 30px; font-family: Arial, sans-serif; color: #153643; font-size: 16px; line-height: 24px;">
                            <h2 style="text-align: center; margin: 0; color: #333333;">¡Gracias por reservar! ¡Te esperamos!</h2>
                            
                            <p style="margin-top: 20px;">Hola <strong th:text="${reserva.clienteNombre}"></strong>,</p>

                            <p>Tu reserva ha sido confirmada con los siguientes detalles:</p>

                            <ul style="padding-left: 20px;">
                                <li><strong>Fecha de inicio:</strong> <span th:text="${#temporals.format(reserva.reservaFecha, 'dd/MM/yyyy HH:mm')}"></span></li>
                                <li><strong>Fecha de fin:</strong> <span th:text="${#temporals.format(reserva.reservaFin, 'dd/MM/yyyy HH:mm')}"></span></li>
                                <li><strong>Número de personas:</strong> <span th:text="${reserva.numeroPersonas}"></span></li>
                                <li><strong>Mesa:</strong> <span th:text="${reserva.mesaNumero}"></span> (capacidad: <span th:text="${reserva.mesaCapacidad}"></span> personas)</li>
                                <li><strong>Estado de la reserva:</strong> <span th:text="${reserva.reservaStatus}"></span></li>
                            </ul>

                            <div th:if="${reserva.alergenos != null and !reserva.alergenos.isEmpty()}">
                                <p><strong>Alergias indicadas:</strong></p>
                                <ul style="padding-left: 20px;">
                                    <li th:each="alergeno : ${reserva.alergenos}" th:text="${alergeno}"></li>
                                </ul>
                            </div>

                            <p>Te hemos enviado esta confirmación a <strong th:text="${reserva.clienteEmail}"></strong>.</p>

                            <p style="margin-top: 30px;">
                                Si necesitas <strong>modificar o cancelar</strong> tu reserva, deberás usar el <strong>ID de la reserva</strong> que te hemos enviado y el correo electrónico con el que realizaste la reserva.
                            </p>

                            <p>
                                <strong>ID de la reserva:</strong> <span th:text="${reserva.reservaId}"></span><br/>
                                <strong>Correo electrónico:</strong> <span th:text="${reserva.clienteEmail}"></span>
                            </p>
                        </td>
                    </tr>

                    <!-- Pie de página -->
                    <tr>
                        <td bgcolor="#000000" style="padding: 20px 30px; font-family: Arial, sans-serif; color: #ffffff; font-size: 14px;">
                            <table width="100%" style="text-align: center;">
                                <tr>
                                    <td width="75%">
                                        &copy; Las Tres Nueces, 2025<br/>
                                        <span th:text="${address}" style="color: #ffffff;"></span>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>